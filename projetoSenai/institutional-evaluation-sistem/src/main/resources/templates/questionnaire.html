<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Questionário</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
<h1>Responder Questionário</h1>

<form th:action="@{/questionnaire/submit}" th:object="${answerListRequest}" method="post">
    <div th:each="q, iterStat : ${questions}" class="question-card mb-4 p-3 rounded shadow-sm bg-white">
        <p>
            <strong th:text="${q.text}"></strong>

            <!-- Questões qualitativas (texto livre) -->
            <div th:if="${q.type.name() == 'QUALITATIVE'}">
                <input type="text"
                       th:field="*{answers[__${iterStat.index}__].answerText}"
                       class="form-control"
                       placeholder="Digite sua resposta aqui" />

                <!-- Vincula o ID da questão escondido -->
                <input type="hidden" th:field="*{answers[__${iterStat.index}__].questionId}" th:value="${q.id}" />
            </div>

            <!-- Questões quantitativas (escala 1–5 ou minScale–maxScale) -->
            <div th:if="${q.type.name() == 'QUANTITATIVE'}" class="scale-options">
                <label th:each="i : ${#numbers.sequence(q.minScale, q.maxScale)}">
                    <input type="radio"
                           th:field="*{answers[__${iterStat.index}__].answerText}"
                           th:value="${i}" />
                    <span th:text="${i}"></span>
                </label>

                <!-- Vincula o ID da questão escondido -->
                <input type="hidden" th:field="*{answers[__${iterStat.index}__].questionId}" th:value="${q.id}" />
            </div>
        </p>
    </div>

    <button type="submit" class="btn btn-primary">Enviar Respostas</button>
</form>


<!-- Mensagens -->
<p th:if="${message}" class="message success" th:text="${message}"></p>
<p th:if="${errorMessage}" class="message error" th:text="${errorMessage}"></p>

 <script th:src="@{/js/app.js}"></script>
</body>
</html>

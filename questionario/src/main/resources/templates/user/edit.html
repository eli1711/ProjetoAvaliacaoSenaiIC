<form th:action="@{/users/save}" th:object="${user}" method="post" class="space-y-6">
  <!-- removido o hidden do username -->

  <div>
    <label for="name" class="block text-sm font-medium text-gray-700 mb-1">Nome completo</label>
    <input type="text" id="name" th:field="*{name}" required
           class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" />
  </div>

  <div>
    <label for="email" class="block text-sm font-medium text-gray-700 mb-1">E-mail</label>
    <input type="email" id="email" th:field="*{email}" required
           class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" />
  </div>

  <!-- NOVO CAMPO: LOGIN -->
  <div>
    <label for="username" class="block text-sm font-medium text-gray-700 mb-1">
      Login de acesso
    </label>
    <input type="text"
           id="username"
           th:field="*{username}"
           required
           placeholder="ex: joao.silva"
           class="w-full px-4 py-2 border border-gray-300 rounded-lg
                  focus:ring-2 focus:ring-blue-500 focus:border-blue-500" />
    <p class="mt-1 text-xs text-gray-500">
      Este será o login usado para acessar o sistema.
    </p>
  </div>

  <div>
    <label for="password" class="block text-sm font-medium text-gray-700 mb-1">Senha</label>
    <input type="password" id="password" th:field="*{password}"
           th:placeholder="${user.username} != null ? 'Deixe em branco para manter' : ''"
           class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" />
  </div>

  <div>
    <label for="ra" class="block text-sm font-medium text-gray-700 mb-1">RA / Matrícula</label>
    <input type="text" id="ra" th:field="*{ra}"
           class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" />
  </div>

  <!-- Turma -->
  <div>
    <label for="turmaId" class="block text-sm font-medium text-gray-700 mb-1">Turma</label>
    <select id="turmaId" name="turmaId"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
      <option value="">(Sem turma)</option>
      <option th:each="t : ${turmas}"
              th:value="${t.id}"
              th:text="${t.nome + ' - ' + t.curso + ' (' + t.ano + '/' + t.semestre + ')'}"
              th:selected="${user.turma != null and user.turma.id == t.id}">
      </option>
    </select>
  </div>

  <div>
    <label for="role" class="block text-sm font-medium text-gray-700 mb-1">Função</label>
    <select id="role" th:field="*{role}" required
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
      <option value="">Selecione...</option>
      <option value="ROLE_ALUNO">Aluno</option>
      <option value="ROLE_PROFESSOR">Professor</option>
      <option value="ROLE_ADMIN">Administrador</option>
    </select>
  </div>

  <div class="pt-4 flex justify-center gap-3">
    <a href="/users"
       class="px-5 py-2 rounded-lg border border-gray-300 text-gray-700 text-sm font-medium hover:bg-gray-100">
      Cancelar
    </a>
    <button type="submit"
            class="bg-blue-600 text-white px-6 py-2 rounded-lg font-medium shadow hover:bg-blue-700 text-sm">
      Salvar Usuário
    </button>
  </div>
</form>
